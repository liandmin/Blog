### 浏览器缓存(http缓存)

#### 简介
缓存分为两种：`强缓存`和`协商缓存`；浏览器会先查看是否命中强缓存然后再看是否命中协商缓存。强缓存和协商缓存的区别：命中强缓存，；浏览器就不会发送请求到服务器了；命中协商缓存，浏览器会发送请求到服务器，请求头部携带协商缓存字段，供服务器验证，若服务器验证通过，会响应304，响应只有头部字段信息，没有资源；若服务器验证不通过，响应200，返回新的资源。

#### 强缓存

强缓存主要有两个header字段：Expries 和 Cache-Control

* Expries(http1.0的规范，值是一个GMT格式的时间字符串)代表缓存资源的过期时间。优先级比Cache-Control低

* Cache-Control(http1.1的规范)利用其max-age来判断缓存资源的最大生命周期，单位是秒。

> Cache-Control还有其他几个常用的设置值：
> * no-cache：不使用强缓存，使用协商缓存
> * no-store：所有内容都不会缓存
> * private：默认值，只能被客户端用户缓存，不能被cdn缓存
> * public：可以被所有的客户端和cdn缓存
> * max-age：缓存内容将会在指点多少秒后失效

#### 协商缓存

协商缓存需要浏览器验证之后才能使用，浏览器发送 If-Modified-Since(等于第一次请求时服务器返回的 Last-Modified 的值) 和 If-None-Match(等于第一次请求时服务器返回的 Etag 的值) 两个字段供服务器验证。

* Last-Modified：资源最后更新时间，随服务器response返回

* If-Modified-Since：通过比较两个时间来判断资源在两次请求期间是否有过修改，如果没有修改，则命中协商缓存

* Etag：表示资源内容的唯一标志，随服务器response返回

* If-None-Match：服务器通过比较请求头部的If-None-Match 与当前资源Etag 是否一致来判断资源是否在两次请求之间有过修改，如果没有修改，则命中协商缓存

有了 Last-Modified，为什么还要用 ETag？

> 1. 因为在1秒钟内对一个文件进行多次修改，Last-Modified 就会不正确
> 2. 某些服务器不能精确的得到文件的最后修改时间
> 3. 一些文件也许会周期性的更改，但是他的内容并不会改变，这个时候我们并不希望客户端认为这个文件被修改了而重新GET

有了 Etag，为什么还要用 Last-Modified？

> 因为有些时候 ETag 可以弥补 Last-Modified 判断的缺陷，
但是也有时候 Last-Modified 可以弥补 ETag 判断的缺陷。比如 一些图片等静态文件的修改，如果每次扫描内容生成 ETag 来比较，显然要比直接比较修改时间慢很多。所有说这两种判断是相辅相成的。


用户行为对缓存的影响
![image](https://images2015.cnblogs.com/blog/408483/201605/408483-20160525202949975-1541314356.png)

最后推荐知乎的这篇回答：[https://www.zhihu.com/question/20790576](https://www.zhihu.com/question/20790576)


### JSONP的原理

利用了script标签没有跨域限制的漏洞来达到和第三方通讯的目的。提供一个回调函数接收数据（函数名可以约定或者通过地址传参）。第三方产生响应为json数据的包装浏览器调用callback函数。并传递解析后的json对象作为参数(参数不一定是json格式，也可以是字符串拼接)。

### Promise和AJAX有什么不同

首先要明确，AJAX是用来与后台进行数据交互的，Promise是用来充当异步操作和回调函数之间的中介，它要解决的是异步函数之间的层层嵌套，将其转化为便于理解和阅读的链式步骤关系。

#### 注意

> img标签只能用来获取跨域的图片，如果返回非图片内容，则会触发onerror事件，并且无法获取响应体内容

### rem和vw的区别以及它们是如何计算的

1. rem是相对长度单位；vw是视口宽度
2. rem是相对文档根元素的字体大小来计算倍数的；vw是视口宽度也就是浏览器的可视宽度
3. 根元素的字体大小是可以调整的，但是移动端的可视区域，也就是屏幕宽度是固定的
4. rem需要中间转一道，最终换算为px，vw天生用作布局，不需要转
5.IE8及以下都不支持rem和vw，安卓4,4以下不支持vw但是支持rem

```
<!--在项目中一般设置html元素的font-size为calc(100vw / 7.5)，这样 1rem = 50px-->
```



